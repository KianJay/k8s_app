{% extends 'k8s_doc/base.html' %}
  
{% block content %}
<div class="idocs-content">
<div class="container mt-5">
  <div class="row">
      <div class="col-md-12">
          <div class="well well-sm">
              <form class="form-horizontal" method="post" id="contact-us-form">
          
                  <fieldset>
                      <h3 class="text-left header">Feedback</h3>

                      <div class="form-group"  >
                          <span class="col-md-1 col-md-offset-2 text-center"></span>
                          <div class="col-md-8">
                              <input name="name" type="text" placeholder="Name" class="form-control">
                              {% csrf_token %}
                          </div>
                      </div>

                      <div class="form-group">
                          <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-envelope-o bigicon"></i></span>
                          <div class="col-md-8">
                              <input id="email" name="email" type="text" maxlength="50" placeholder="Email Address" class="form-control">
                          </div>
                      </div>
                      <div class="form-group">
                          <span class="col-md-1 col-md-offset-2 text-center"></span>
                          <div class="col-md-8">
                              <textarea class="form-control" id="message" name="message" placeholder="Enter your massage for us here." rows="7"></textarea>
                          </div>
                      </div>
                      <p id="result-text"></p>
                      <div class="form-group">
                          <div class="col-md-12 text-center">
                              <input type="submit" class="btn btn-lg" name="submit" id="sumbit"></input>
                          </div>
       
                      </div>
                  </fieldset>
              </form>
          </div>
      </div>
  </div>
</div>
</div>
<style>
  .header1 {
      color: #36A0FF;
      font-size: 27px;

  }

</style>
<script>
const form = document.querySelector("form");
form.addEventListener("submit", (event) => {
  // prevent the form submit from refreshing the page
  event.preventDefault();

  const { name, email, message } = event.target;

	// Use your API endpoint URL you copied from the previous step
  const endpoint =
    "https://9gptd31rq4.execute-api.ap-northeast-2.amazonaws.com/default/sendEmail";
  // We use JSON.stringify here so the data can be sent as a string via HTTP
	const body = JSON.stringify({
    senderName: name.value,
    senderEmail: email.value,
    message: message.value
  });
  const requestOptions = {
    method: "POST",
    body
  };

  fetch(endpoint, requestOptions)
    .then((response) => {
      if (!response.ok) throw new Error("Error in fetch");
      return response.json();
    })
    .then((response) => {
      document.getElementById("result-text").innerText =
        "Email sent successfully!";
    })
    .catch((error) => {
      document.getElementById("result-text").innerText =
        "An unkown error occured.";
    });
});
</script>

{% endblock %}